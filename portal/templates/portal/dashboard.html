{% extends 'portal/base.html' %}
{% load i18n %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">{% trans "مرحباً بك،" %} {{ user.tenant.name }}!</h2>
{% if lease %}
<div class="bg-white p-6 rounded-lg shadow-md mb-8">
    <h3 class="text-xl font-bold mb-4">{% trans "تفاصيل عقدك النشط" %}</h3>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div><strong>{% trans "رقم العقد" %}:</strong><p>{{ lease.contract_number }}</p></div>
        <div><strong>{% trans "الوحدة" %}:</strong><p>{{ lease.unit }}</p></div>
        <div><strong>{% trans "الإيجار الشهري" %}:</strong><p>{{ lease.monthly_rent|floatformat:2 }} {% trans "ر.ع" %}</p></div>
        <div><strong>{% trans "تاريخ الانتهاء" %}:</strong><p>{{ lease.end_date|date:"d M Y" }}</p></div>
    </div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="font-bold mb-2">{% trans "سجل الدفعات" %}</h3>
        <ul>{% for payment in payments %}<li class="flex justify-between py-1"><span>{{ payment.payment_date|date:"d M Y" }}</span><span>{{ payment.amount|floatformat:2 }} {% trans "ر.ع" %}</span></li>{% empty %}<li>{% trans "لا توجد دفعات." %}</li>{% endfor %}</ul>
    </div>
    <div class="bg-white p-6 rounded-lg shadow-md">
        <h3 class="font-bold mb-2">{% trans "المستندات" %}</h3>
        <ul>{% for doc in documents %}<li class="py-1"><a href="{{ doc.file.url }}" target="_blank" class="text-blue-600 hover:underline">{{ doc.title }}</a></li>{% empty %}<li>{% trans "لا توجد مستندات." %}</li>{% endfor %}</ul>
    </div>
</div>
{% else %}
<p>{% trans "ليس لديك عقود نشطة حالياً." %}</p>
{% endif %}
{% if error %}<p class="text-red-500">{{ error }}</p>{% endif %}
{% endblock %}